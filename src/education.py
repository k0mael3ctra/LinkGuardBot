from __future__ import annotations

QUIZ = [
    {
        "question": "В рабочем чате прислали счет, домен отличается на одну букву. Что делать?",
        "options": [
            "Не открывать, проверить домен и зайти на сайт вручную.",
            "Открыть, если адрес похож.",
            "Переслать коллеге для проверки.",
        ],
        "correct": 0,
        "explain": "Если домен отличается, лучше зайти на официальный сайт вручную и уточнить контекст.",
    },
    {
        "question": "Ссылка выглядит так: https://example.com@evil.test/login. Что это значит?",
        "options": [
            "Это просто email в ссылке.",
            "Откроется example.com.",
            "Фактический домен - evil.test.",
        ],
        "correct": 2,
        "explain": "Часть после @ - реальный домен, это частая маскировка.",
    },
    {
        "question": "Пришла короткая ссылка и текст: 'срочно подтвердите пароль'. Что правильно?",
        "options": [
            "Открыть, чтобы быстрее решить вопрос.",
            "Раскрыть адрес и зайти на сайт вручную.",
            "Ответить и попросить пароль еще раз.",
        ],
        "correct": 1,
        "explain": "Сначала проверь адрес и открывай сайт вручную, а не по ссылке.",
    },
    {
        "question": "Сайт открылся по HTTP без HTTPS. Как поступить?",
        "options": [
            "Вводить данные как обычно.",
            "Скачать файл обновления с сайта.",
            "Не вводить данные, искать HTTPS или официальный сайт.",
        ],
        "correct": 2,
        "explain": "Без HTTPS данные легко перехватить, лучше не вводить их.",
    },
    {
        "question": "По ссылке предлагают скачать .exe/.zip, ты не ожидал файл. Что делать?",
        "options": [
            "Проверить источник и файл, лучше не открывать сразу.",
            "Скачать и открыть.",
            "Переслать файл в другой чат.",
        ],
        "correct": 0,
        "explain": "Неожиданные файлы - частый риск. Нужна проверка и контекст.",
    },
]

TIPS = [
    "Проверяй домен целиком: подмена часто прячется в одной букве.",
    "Если просят логин или оплату по ссылке, открывай сайт вручную.",
    "Короткие ссылки и цепочки редиректов проверяй особенно внимательно.",
    "Не запускай файлы из мессенджера без проверки и понятного контекста.",
    "Срочность и давление - частый признак фишинга.",
]


def get_quiz_question(index: int) -> dict | None:
    if 0 <= index < len(QUIZ):
        return QUIZ[index]
    return None


def short_tips() -> list[str]:
    return TIPS[:3]


def tips_text() -> str:
    return "\n".join(f"- {tip}" for tip in TIPS)
